!function(f){"use strict";window.dotinsights=window.dotinsights||{},dotinsights.Projects=dotinsights.Projects||{},dotinsights.FilteredProjects=dotinsights.FilteredProjects||[],dotinsights.Query=dotinsights.Query||{itemsPerPage:50,maxNumPages:1,page:1,foundItems:0},dotinsights.Pagination=dotinsights.Pagination||{},window.innerWidth<561?dotinsights.Pagination.midSize=2:dotinsights.Pagination.midSize=3,window.innerWidth<768?dotinsights.Query.itemsPerPage=10:dotinsights.Query.itemsPerPage=50;var g=window.dotinsights.Helpers,s=f("#project-form-filter"),t=s.find(".search-submit"),e=null,p=f("#most-loved-projects-table tbody"),n=f("#most-loved-projects-pagination"),o={};function r(t,e){var i=o[t.project.toLowerCase()]??1/0,s=o[e.project.toLowerCase()]??1/0;return i!==s?i-s:t.project.localeCompare(e.project)}function a(t=!1){for(var e=(dotinsights.Query.page-1)*dotinsights.Query.itemsPerPage+1,i="",s=(s=e+dotinsights.Query.itemsPerPage)>dotinsights.Query.foundItems?dotinsights.Query.foundItems+1:s,o=e;o<s;o++){var r=dotinsights.FilteredProjects[o-1],n='<span class="rank-number">'+o+"</span>",a="project-layer",a=(a+=r.layer?" project-layer-color--"+g.sanitizeKey(r.layer):"","string"==typeof r.layer?'<span class="'+a+'">'+r.layer+"</span>":'<span class="text-placeholder">--</span>'),l=""!==r.token?r.token:'<span class="text-placeholder">--</span>',d="./assets/images/projects/"+r.project_slug+".png",c="";r.categories.map(function(t,e){c=(c+=0<e?", ":"")+'<span class="project-cat-color--'+t.slug+'">'+t.name+"</span>"}),c='<p class="project-category">'+c+"</p>",i=(i=(i=(i=(i=(i=(i+='<tr class="row-project">')+('<td class="col-project-info"><a href="'+r.website+'" target="_blank" rel="nofollow" class="project-info"><div class="project-rank">'+n+'</div><div class="project-thumbnail"><img src="'+d+'" alt="'+r.project+'" width="80" height="80"/></div><div class="project-details"><h3 class="project-name">'+r.project+"</h3>"+c+"</div></a></td>"))+('<td class="col-project-layer">'+a+"</td>")+('<td class="col-project-token"><span class="project-token">'+l+"</span></td>"))+('<td class="col-project-github">'+u(r)+"</td>"))+('<td class="col-project-twitter">'+h(r)+"</td>"))+('<td class="col-mobile-project-info">'+'<div class="project-info-line"><div class="label">Layer: </div>'+'<div class="value">'+a+'</div></div><div class="project-info-line"><div class="label">Token: </div><div class="value">'+l+'</div></div><div class="project-info-line"><div class="label">Github: </div><div class="value">'+u(n=r)+'</div></div><div class="project-info-line"><div class="label">Twitter: </div><div class="value">'+h(n)+"</div></div></td>"))+('<td class="col-project-votes">'+function(t){var e=dotinsights.VotedProjects.includes(t.project_id),i="button btn-vote";i+=e?" unvote-this":" vote-this";return'<a href="#" data-project-id="'+t.project_id+'" class="'+i+'"><svg class="button-icon"><use xlink:href="#symbol-ph-heart-straight"></use></svg><span class="button-text">'+dotinsights.NumberUtil.formatWithCommas(0)+"</span></a>"}(r)+"</td>")+"</tr>"}t?p.append(i):p.html(i)}function l(){var t="",e=dotinsights.Query.maxNumPages;if(1<e){for(var i=dotinsights.Query.page,s=[i],o=1,r=i-1;0<r&&(s.unshift(r),o!==dotinsights.Pagination.midSize);r--)o++;for(o=1,r=i+1;r<=e&&(s.push(r),o!==dotinsights.Pagination.midSize);r++)o++;t+="<ul>",1<i&&(t+='<li><a href="#" class="page-prev"  data-page="'+(i-1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>');for(r=0;r<s.length;r++)t=(t+="<li>")+(s[r]===i?'<span class="page-numbers current">'+s[r]+"</a>":'<a href="#" class="page-numbers" data-page="'+s[r]+'">'+s[r]+"</a>")+"</li>";i<e&&(t+='<li><a href="#" class="page-next" data-page="'+(i+1)+'"><svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" fill="#000000" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><polyline points="56 48 136 128 56 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline><polyline points="136 48 216 128 136 208" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></polyline></svg></a></li>'),t+="</ul>"}n.html(t)}function h(t){var e;return t.twitter&&""!==t.twitter&&"N/A"!==t.twitter?(e=(e=(e=t.twitter.replace("https://twitter.com/","@")).replace("https://mobile.twitter.com/","@")).replace("https://x.com/","@"),e=dotinsights.StringUtil.rtrim(e,"/"),'<a href="'+t.twitter+'" target="_blank" class="project-link-twitter text-1-row"><span>'+e+"</span></a>"):'<span class="text-placeholder">--</span>'}function u(t){return t.github&&""!==t.github&&"N/A"!==t.github?'<a href="'+t.github+'" target="_blank" class="project-link-github"><span class="fab fa-github"></span></a>':'<span class="text-placeholder">--</span>'}["Koni Stack","Across","Particle","Avail Nexus","SubWallet","Polygon AggLayer","Optimism Superchain","ZKsync Elastic Chain","Arbitrum Orbit","UniswapX","1inch","Safe","Biconomy","EigenLayer","Hyperlane","Everclear","Arcana","OneBalance","Rhinestone","Okto","Espresso System","Agoric","Orb Labs","Near"].forEach((t,e)=>{o[t.toLowerCase()]=e}),dotinsights.FilteredProjects.sort(r),f(document.body).on("dotinsights/EcosystemMap/Loaded",function(){var m,v,y,t=dotinsights.Projects.slice(),t=(t.sort(r),dotinsights.FilteredProjects=t,dotinsights.FilteredProjects.length);function e(){y.empty();var t=y.width(),e=[],i={},s=!1,o=0,r=0,n=1,a=(window.innerWidth<768?n=.5:window.innerWidth<1200&&(n=.8),2115-window.innerWidth);a*=n,a=Math.max(a,700),y.height(a);for(var l=0;l<v;l++){var d=dotinsights.NumberUtil.precisionRoundMod(m[l].r*n,0);m[l].displayR=Math.max(d,40)}for(;e.length<v&&o<1e4;){(i=m[r]).x=dotinsights.NumberUtil.getRandomInt(i.displayR,t-i.displayR),i.y=dotinsights.NumberUtil.getRandomInt(i.displayR,a-i.displayR);for(s=!1,l=0;l<e.length;l++){var c=e[l];if(dotinsights.NumberUtil.dist(i.x,i.y,c.x,c.y)<i.displayR+c.displayR){s=!0;break}}s||(e.push(i),r++),o++}for(var g=["move-slow","move-normal","move-fast"],l=0;l<e.length;l++){var p=e[l],h=p.vote_count||0,u="bubble-project bubble-project--"+p.project_slug,u='<div class="'+((u+=l%2==0?" move-vertical":" move-vertical-reversed")+(" "+g[dotinsights.NumberUtil.getRandomInt(0,3)]))+'">',h=(u=(u+='<img src="./assets/images/projects/'+p.project_slug+'.png" alt="">')+("<h3>"+p.project+'</h3><div class="vote-count"><svg><use xlink:href="#symbol-ph-heart-straight"></use></svg>'+h+"</div>"),f(u+="</div>"));h.css({width:2*p.displayR,height:2*p.displayR,top:p.y-p.displayR,left:p.x-p.displayR}),h.css("--circle-size",2*p.displayR+"px"),y.append(h)}}dotinsights.Query.page=1,dotinsights.Query.foundItems=t,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(t/dotinsights.Query.itemsPerPage):1,v=(m=[{r:197},{r:144},{r:121},{r:107},{r:102},{r:102},{r:96},{r:88},{r:77},{r:76},{r:76},{r:68},{r:64},{r:60},{r:60},{r:57},{r:57},{r:54},{r:52},{r:49},{r:48},{r:39},{r:38},{r:35},{r:33}]).length,y=f("#bubble-projects"),m=m.map(function(t,e){return{...t,...dotinsights.Projects[e]}}),e(),f(window).on("hresize_one",function(){e()}),a(),l()}),s.on("keyup",".search-field",function(){clearTimeout(e),e=setTimeout(function(){t.addClass("updating-icon"),setTimeout(function(){t.removeClass("updating-icon"),f(document.body).trigger("dotinsights/EcosystemMap/Searching")},300)},700)}),s.on("submit",function(t){return clearTimeout(e),e=setTimeout(function(){f(document.body).trigger("dotinsights/EcosystemMap/Searching")},700),!1}),f(document.body).on("dotinsights/EcosystemMap/Searching",function(t){var e=s.find('input[name="s"]').val(),i=[],e=(""!==e&&i.push({relation:"or",terms:[{key:"project",value:e,operator:"like"},{key:"category",value:e,operator:"like"},{key:"layer",value:e,operator:"like"},{key:"token",value:e,operator:"like"}]}),0<i.length?g.filterByRules(i,dotinsights.Projects):dotinsights.Projects),i=((e=e.slice()).sort(r),dotinsights.FilteredProjects=e,dotinsights.FilteredProjects.length);dotinsights.Query.page=1,dotinsights.Query.foundItems=i,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(i/dotinsights.Query.itemsPerPage):1,a(),l()}),f(window).on("hresize",function(){window.innerWidth<561?dotinsights.Pagination.midSize=2:dotinsights.Pagination.midSize=3,window.innerWidth<768?dotinsights.Query.itemsPerPage=10:dotinsights.Query.itemsPerPage=50}),n.on("click","a",function(t){t.preventDefault(),dotinsights.Query.page=f(this).data("page");t=p.offset().top-120;f("html, body").animate({scrollTop:t},200),a(),l()})}(jQuery);