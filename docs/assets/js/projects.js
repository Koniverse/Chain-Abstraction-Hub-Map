!function(m){"use strict";window.dotinsights=window.dotinsights||{},dotinsights.Projects=dotinsights.Projects||{},dotinsights.Query=dotinsights.Query||{itemsPerPage:3,maxNumPages:1,page:1,foundItems:0},dotinsights.FilteredProjects=dotinsights.FilteredProjects||[];var c=window.dotinsights.Helpers,i=0,s=m(window),d={key_management:10,account_abstraction:20,wallet:30,policies:40,intents:50,tooling:60,mempools:70,sequencing:80,auctions:90,orderflow:100,private_computation:110,routing:120,last_look:130,inventory:140,oracles:150,bridges:160,pre_confirmation:170,data_availability:180,finality:190,liquidity:200,proofs:210,execution:220,application_layer:230,uncategorized:9999},o=m("#project-form-filter"),t=o.find(".search-submit"),e=null,h=m("#project-categories-list"),l=m("#btn-load-more-projects");async function n(a,r=void 0){return new Promise(t=>{var e=[];if(0<a.length){var i,s=c.groupByKeys(a,"category_slugs");for(i in s=r?{[r]:s[r]}:s){var o=s[i],o=(o.sort(function(t,e){return t.project.localeCompare(e.project)}),{key:i,name:"uncategorized"===i?"Uncategorized":function(e,t){var i="Uncategorized";return t.split(",").map(t=>t.trim()).forEach(t=>{c.sanitizeKey(t)===e&&(i=t)}),i}(i,s[i][0].category),projects:o});o.order=d.hasOwnProperty(i)?d[i]:999,e.push(o)}}var n=(e=dotinsights.ArrayUtil.sortByKey(e,"order","ASC")).length;dotinsights.FilteredProjects=e,dotinsights.Query.page=1,dotinsights.Query.foundItems=n,dotinsights.Query.maxNumPages=0<dotinsights.Query.itemsPerPage?Math.ceil(n/dotinsights.Query.itemsPerPage):1,1<dotinsights.Query.maxNumPages?l.show():l.hide(),t("resolved")})}function a(t=!1){for(var e=(dotinsights.Query.page-1)*dotinsights.Query.itemsPerPage+1,i="",s=(s=e+dotinsights.Query.itemsPerPage)>dotinsights.Query.foundItems?dotinsights.Query.foundItems+1:s,o=e;o<s;o++){var n=dotinsights.FilteredProjects[o-1],a=n.projects,r=a.length,c="tm-animation fade-in-up cat-item cat-"+n.key,d=""!==n.name?n.name:"Others";i=i+('<div class="'+c+'"><h3 class="'+("project-category-name project-cat-color--"+n.key)+'">'+d+'<span class="count">'+r+"</span></h3>")+'<div class="projects-grid grid-modern" style="--grid-columns-desktop: 8; --grid-gutter-desktop: 20;--grid-columns-laptop: 7; --grid-columns-tablet-extra: 6; --grid-columns-tablet: 4; --grid-columns-mobile-extra: 3; --grid-columns-mobile: 2;">';for(var l=0;l<r;l++)var g=a[l],u="../assets/images/projects/"+g.project_slug+".png",i=(i=(i+='<a href="'+g.website+'" target="_blank" rel="nofollow" class="grid-item project-item">')+('<div class="project-thumbnail"><img src="'+u+'" alt="'+g.project+'" width="80" height="80"/></div>'))+('<div class="project-info"><h3 class="project-name">'+g.project+"</h3></div>")+"</a>";i+="</div></div>"}t?h.append(i):h.html(i),h.find(".tm-animation").waypoint(function(){var t=this.element||m(this);m(t).addClass("animate")},{offset:"100%"})}m(document.body).on("dotinsights/EcosystemMap/Loaded",function(){!async function(){await n(dotinsights.Projects),function(){for(var t=dotinsights.Projects.length,e=m("#project-categories-filter"),i='<a href="#" data-cat="" class="current filter-item filter-all"><span class="filter-name">All projects</span><span class="filter-count">'+t+"</span></a>",s=0;s<dotinsights.FilteredProjects.length;s++){var o=dotinsights.FilteredProjects[s],n=o.projects,a="filter-item project-cat-color--"+o.key;i+='<a href="#" data-cat="'+o.key+'" class="'+a+'"><span class="filter-name">'+o.name+'</span><span class="filter-count">'+n.length+"</span></a>"}e.html(i)}(),a()}()}),o.on("keyup",".search-field",function(){clearTimeout(e),e=setTimeout(function(){t.addClass("updating-icon"),setTimeout(function(){t.removeClass("updating-icon"),m(document.body).trigger("dotinsights/EcosystemMap/Searching")},300)},700)}),o.on("submit",function(t){return clearTimeout(e),e=setTimeout(function(){m(document.body).trigger("dotinsights/EcosystemMap/Searching")},700),!1}),m(document.body).on("dotinsights/EcosystemMap/Searching",function(){!async function(){var t=o.find('input[name="s"]').val(),e=o.find('input[name="cat"]').val(),i=[],s=[];""!==t&&s.push({key:"project",value:t,operator:"like"});""!==e&&s.push({key:"category_slugs",value:e,operator:"in"});0<s.length&&i.push({relation:"and",terms:s});t=0<i.length?c.filterByRules(i,dotinsights.Projects):dotinsights.Projects;""!==e?await n(t,e):await n(t);a()}()}),m(document.body).on("click",".filter-item",function(t){t.preventDefault();var e,t=m(this);t.hasClass("current")||(e=m(this).data("cat"),t.siblings().removeClass("current"),t.addClass("current"),o.find('input[name="cat"]').val(e),o.trigger("dotinsights/EcosystemMap/Searching"))}),m(document.body).on("click","#btn-load-more-projects",function(t){t.preventDefault();var e=m(this);dotinsights.Query.page<dotinsights.Query.maxNumPages&&(l.addClass("updating-icon"),setTimeout(function(){dotinsights.Query.page+=1,a(!0),l.removeClass("updating-icon"),dotinsights.Query.page===dotinsights.Query.maxNumPages&&e.hide()},700))}),s.on("scroll",function(){var t,e=m(this).scrollTop();i<e&&(t=s.height(),t=parseInt(.9*t),l.offset().top+l.outerHeight(!0)-t<=e)&&(l.hasClass("updating-icon")||l.trigger("click")),i=e})}(jQuery);